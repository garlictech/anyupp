<nb-card>
  <nb-card-header class="p-1 ps-2">
    {{ 'dashboard.reports.productMix' | translate }}
    <button
      *ngIf="!isModal"
      nbButton
      size="tiny"
      class="float-right"
      (click)="showFullProductMix()"
    >
      {{ 'dashboard.reports.listAll' | translate }}
    </button>
    <button
      *ngIf="isModal"
      nbButton
      ghost
      shape="round"
      size="small"
      class="float-right"
      (click)="close()"
    >
      <nb-icon icon="close-outline"></nb-icon>
    </button>
  </nb-card-header>
  <nb-card-body class="p-2 overflow-hidden">
    <ng-container *ngFor="let product of (productMixData$ | async) || []">
      <div class="row fw-bold">
        <div class="col-9">{{ product.name | localize }}</div>
        <div class="col-2">
          {{ 'products.productType.' + product.productType | translate }}
        </div>
        <div class="col-1 text-end">{{ product.quantity }}</div>
      </div>
      <div class="row" *ngFor="let variant of product.variants || []">
        <div class="col-10">{{ variant.name | localize }}</div>
        <div class="col-1 col-offset-1 text-end">{{ variant.quantity }}</div>
      </div>
      <div class="row" *ngFor="let component of product.components || []">
        <div class="col-9">{{ component.name | localize }}</div>
        <div class="col-1 col-offset-2 text-end">{{ component.quantity }}</div>
      </div>
    </ng-container>
  </nb-card-body>
</nb-card>
