<ng-container *ngIf="itemFormArray">
  <div
    class="row"
    *ngFor="let item of itemFormArray | iterableAbstractControls"
  >
    <div
      class="col-md-5 pt-3"
      [ngClass]="{
        'col-md-10': productLevel === eProductLevel.GROUP,
        'col-md-6': productLevel === eProductLevel.UNIT
      }"
      *ngIf="
        item.value.productComponentId
          | productComponentInfo
          | async as component
      "
    >
      <div class="paragraph-2 mb-1">{{ component?.name || {} | localize }}</div>
      <div>
        <bgap-allergens [allergens]="component.allergens"></bgap-allergens>
      </div>
    </div>
    <div class="col-md-2" *ngIf="productLevel === eProductLevel.GROUP">
      <bgap-form-text-input
        caption="products.refPrice"
        type="number"
        [control]="item.get('refGroupPrice') | asFormControl"
        inputId="refGroupPrice"
      ></bgap-form-text-input>
    </div>
    <ng-container *ngIf="productLevel === eProductLevel.UNIT">
      <div class="col-md-2">
        <bgap-form-static-text
          caption="products.refPrice"
          [value]="item.value.refGroupPrice | currencyFormatter: currency!"
        ></bgap-form-static-text>
      </div>
      <div class="col-md-2">
        <bgap-form-text-input
          [staticCaption]="
            ('products.price' | translate) + ' (' + currency! + ')'
          "
          type="number"
          [control]="item.get('price') | asFormControl"
          inputId="price"
        ></bgap-form-text-input>
      </div>
      <div class="col-md-2">
        <bgap-form-text-input
          [staticCaption]="
            ('common.packagingFee' | translate) + ' (' + currency! + ')'
          "
          type="number"
          [control]="item.get('netPackagingFee') | asFormControl"
          inputId="netPackagingFee"
        ></bgap-form-text-input>
      </div>
    </ng-container>
  </div>
</ng-container>
