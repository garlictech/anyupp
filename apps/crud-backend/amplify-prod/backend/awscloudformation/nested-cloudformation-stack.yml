{
  'AWSTemplateFormatVersion': '2010-09-09',
  'Description': 'Root Stack for AWS Amplify CLI',
  'Parameters':
    {
      'DeploymentBucketName':
        {
          'Description': 'Name of the common deployment bucket provided by the parent stack',
          'Type': 'String',
          'Default': 'DeploymentBucket',
        },
      'AuthRoleName': { 'Type': 'String', 'Default': 'AuthRoleName' },
      'UnauthRoleName': { 'Type': 'String', 'Default': 'UnauthRoleName' },
    },
  'Resources':
    {
      'DeploymentBucket':
        {
          'Type': 'AWS::S3::Bucket',
          'DeletionPolicy': 'Retain',
          'Properties': { 'BucketName': { 'Ref': 'DeploymentBucketName' } },
        },
      'AuthRole':
        {
          'Type': 'AWS::IAM::Role',
          'Properties':
            {
              'RoleName': { 'Ref': 'AuthRoleName' },
              'AssumeRolePolicyDocument':
                {
                  'Version': '2012-10-17',
                  'Statement':
                    [
                      {
                        'Sid': '',
                        'Effect': 'Deny',
                        'Principal':
                          { 'Federated': 'cognito-identity.amazonaws.com' },
                        'Action': 'sts:AssumeRoleWithWebIdentity',
                      },
                    ],
                },
            },
        },
      'UnauthRole':
        {
          'Type': 'AWS::IAM::Role',
          'Properties':
            {
              'RoleName': { 'Ref': 'UnauthRoleName' },
              'AssumeRolePolicyDocument':
                {
                  'Version': '2012-10-17',
                  'Statement':
                    [
                      {
                        'Sid': '',
                        'Effect': 'Deny',
                        'Principal':
                          { 'Federated': 'cognito-identity.amazonaws.com' },
                        'Action': 'sts:AssumeRoleWithWebIdentity',
                      },
                    ],
                },
            },
        },
      'storageanyuppstorage':
        {
          'Type': 'AWS::CloudFormation::Stack',
          'Properties':
            {
              'TemplateURL': 'https://s3.amazonaws.com/amplify-anyuppbackend-prod-132227-deployment/amplify-cfn-templates/storage/s3-cloudformation-template.json',
              'Parameters':
                {
                  'bucketName': 'anyuppbackendbucket',
                  'authPolicyName': 's3_amplify_08064c9d',
                  'unauthPolicyName': 's3_amplify_08064c9d',
                  'authRoleName': 'prod-anyupp-backend-cogni-CognitoDefaultAuthentica-1EA8UY14ZVCOR',
                  'unauthRoleName': 'prod-anyupp-backend-cogni-CognitoDefaultUnauthenti-92QNVXAU9TFC',
                  'selectedGuestPermissions': 's3:GetObject,s3:ListBucket',
                  'selectedAuthenticatedPermissions': 's3:PutObject,s3:GetObject,s3:ListBucket,s3:DeleteObject',
                  's3PermissionsAuthenticatedPublic': 's3:PutObject,s3:GetObject,s3:DeleteObject',
                  's3PublicPolicy': 'Public_policy_ad7fb221',
                  's3PermissionsAuthenticatedUploads': 's3:PutObject',
                  's3UploadsPolicy': 'Uploads_policy_ad7fb221',
                  's3PermissionsAuthenticatedProtected': 's3:PutObject,s3:GetObject,s3:DeleteObject',
                  's3ProtectedPolicy': 'Protected_policy_af8c0041',
                  's3PermissionsAuthenticatedPrivate': 's3:PutObject,s3:GetObject,s3:DeleteObject',
                  's3PrivatePolicy': 'Private_policy_af8c0041',
                  'AuthenticatedAllowList': 'ALLOW',
                  's3ReadPolicy': 'read_policy_ad7fb221',
                  's3PermissionsGuestPublic': 's3:GetObject',
                  's3PermissionsGuestUploads': 'DISALLOW',
                  'GuestAllowList': 'ALLOW',
                  'triggerFunction': 'NONE',
                  'env': 'prod',
                },
            },
        },
      'apianyuppbackend':
        {
          'Type': 'AWS::CloudFormation::Stack',
          'Properties':
            {
              'TemplateURL': 'https://s3.amazonaws.com/amplify-anyuppbackend-prod-132227-deployment/amplify-cfn-templates/api/cloudformation-template.json',
              'Parameters':
                {
                  'CreateAPIKey': 1,
                  'AppSyncApiName': 'anyuppbackend',
                  'DynamoDBBillingMode': 'PAY_PER_REQUEST',
                  'DynamoDBEnableServerSideEncryption': false,
                  'AuthCognitoUserPoolId': 'eu-west-1_oOiyvLxXP',
                  'authRoleName': 'prod-anyupp-backend-cogni-CognitoDefaultAuthentica-1EA8UY14ZVCOR',
                  'unauthRoleName': 'prod-anyupp-backend-cogni-CognitoDefaultUnauthenti-92QNVXAU9TFC',
                  'S3DeploymentBucket': 'amplify-anyuppbackend-prod-132227-deployment',
                  'S3DeploymentRootKey': 'amplify-appsync-files/7128293acafff883bb7f8eecce2bd73538cc6d54',
                  'env': 'prod',
                },
            },
        },
    },
  'Outputs':
    {
      'Region':
        {
          'Description': 'CloudFormation provider root stack Region',
          'Value': { 'Ref': 'AWS::Region' },
          'Export': { 'Name': { 'Fn::Sub': '${AWS::StackName}-Region' } },
        },
      'StackName':
        {
          'Description': 'CloudFormation provider root stack ID',
          'Value': { 'Ref': 'AWS::StackName' },
          'Export': { 'Name': { 'Fn::Sub': '${AWS::StackName}-StackName' } },
        },
      'StackId':
        {
          'Description': 'CloudFormation provider root stack name',
          'Value': { 'Ref': 'AWS::StackId' },
          'Export': { 'Name': { 'Fn::Sub': '${AWS::StackName}-StackId' } },
        },
      'DeploymentBucketName':
        {
          'Description': 'CloudFormation provider root stack deployment bucket name',
          'Value': { 'Ref': 'DeploymentBucketName' },
          'Export':
            { 'Name': { 'Fn::Sub': '${AWS::StackName}-DeploymentBucketName' } },
        },
      'AuthRoleArn': { 'Value': { 'Fn::GetAtt': ['AuthRole', 'Arn'] } },
      'UnauthRoleArn': { 'Value': { 'Fn::GetAtt': ['UnauthRole', 'Arn'] } },
      'AuthRoleName': { 'Value': { 'Ref': 'AuthRole' } },
      'UnauthRoleName': { 'Value': { 'Ref': 'UnauthRole' } },
    },
}
