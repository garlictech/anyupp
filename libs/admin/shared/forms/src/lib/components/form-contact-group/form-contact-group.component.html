<fieldset class="form" *ngIf="contactFormGroup" [formGroup]="contactFormGroup">
  <legend class="label">{{ 'common.contact.contact' | translate }}</legend>

  <div class="clearfix"></div>
  <bgap-form-text-input
    caption="common.email"
    type="email"
    [control]="contactFormGroup?.get('email') | asFormControl"
    inputId="email"
  ></bgap-form-text-input>
  <bgap-form-text-input
    caption="common.phone"
    type="text"
    [control]="contactFormGroup?.get('phone') | asFormControl"
    inputId="phone"
  ></bgap-form-text-input>

  <ng-container *ngIf="showAddressForm">
    <div class="label mt-20">{{ 'common.contact.address' | translate }}</div>
    <bgap-form-text-input
      caption="common.title"
      type="text"
      [control]="contactFormGroup?.get('address.title') | asFormControl"
      inputId="addressTitle"
    ></bgap-form-text-input>
    <bgap-form-text-input
      caption="common.contact.country"
      type="text"
      [control]="contactFormGroup?.get('address.country') | asFormControl"
      inputId="addressCountry"
    ></bgap-form-text-input>
    <bgap-form-text-input
      caption="common.contact.postalCode"
      type="text"
      [control]="contactFormGroup?.get('address.postalCode') | asFormControl"
      inputId="addressPostalCode"
    ></bgap-form-text-input>
    <bgap-form-text-input
      caption="common.contact.city"
      type="text"
      [control]="contactFormGroup?.get('address.city') | asFormControl"
      inputId="addressCity"
    ></bgap-form-text-input>
    <bgap-form-text-input
      caption="common.contact.address"
      type="text"
      [control]="contactFormGroup?.get('address.address') | asFormControl"
      inputId="addressAddress"
    ></bgap-form-text-input>

    <ng-container *ngIf="showLocationForm">
      <div class="row">
        <div class="col-md-6">
          <bgap-form-static-text
            caption="common.contact.locationLat"
            [value]="contactFormGroup?.value?.location?.lat"
            inputId="addressLocationLat"
          ></bgap-form-static-text>
        </div>
        <div class="col-md-6">
          <bgap-form-static-text
            caption="common.contact.locationLng"
            [value]="contactFormGroup?.value?.location?.lon"
            inputId="addressLocationLng"
          ></bgap-form-static-text>
        </div>
      </div>

      <bgap-google-map
        [markerLocation]="contactFormGroup?.value?.location"
        (positionChange)="markerPositionChange($event)"
      ></bgap-google-map>

      <div class="mt-3">
        <button type="button" nbButton size="small" (click)="locateAddress()">
          <nb-icon icon="location_on" pack="material-icons"></nb-icon>
          {{ 'units.locateOnMap' | translate }}
        </button>
      </div>
    </ng-container>
  </ng-container>
</fieldset>
